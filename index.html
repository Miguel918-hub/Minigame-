<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Minigame ðŸ’Ž</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap');

  * {
    box-sizing: border-box;
  }

  body {
    background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
    margin: 0; padding: 0;
    font-family: 'Orbitron', sans-serif;
    color: #eee;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
  }

  h1 {
    margin: 30px 0 10px;
    font-size: 3.5rem;
    color: #00fff7;
    text-shadow:
      0 0 5px #00fff7,
      0 0 10px #00fff7,
      0 0 20px #00fff7,
      0 0 40px #0ff;
  }

  #loginScreen, #game {
    width: 90vw;
    max-width: 380px;
    background: rgba(20,20,20,0.85);
    padding: 25px 20px 35px;
    border-radius: 15px;
    box-shadow:
      0 0 15px #00fff7aa,
      inset 0 0 20px #00fff7cc;
  }

  #loginScreen {
    margin-top: 50px;
  }

  p {
    font-size: 1.2rem;
    margin-bottom: 10px;
    color: #00fff7cc;
  }

  input[type="email"] {
    width: 100%;
    padding: 12px 10px;
    font-size: 1.1rem;
    border: none;
    border-radius: 10px;
    outline: none;
    background: #002f38;
    color: #00fff7;
    box-shadow:
      inset 0 0 8px #00fff7cc;
    transition: background 0.3s;
  }
  input[type="email"]::placeholder {
    color: #00fff799;
  }
  input[type="email"]:focus {
    background: #004750;
  }

  button {
    cursor: pointer;
    margin-top: 15px;
    width: 100%;
    padding: 14px 0;
    font-size: 1.3rem;
    font-weight: 700;
    color: #002828;
    background: #00fff7;
    border: none;
    border-radius: 12px;
    box-shadow:
      0 0 10px #00fff7cc,
      0 4px 12px #00fff7bb;
    transition: background 0.3s, color 0.3s;
  }
  button:hover {
    background: #00d4c9;
    color: #000;
  }

  #game {
    margin-top: 40px;
  }

  .grid {
    margin-top: 20px;
    display: grid;
    grid-template-columns: repeat(6, 60px);
    grid-gap: 12px;
    justify-content: center;
  }

  .cell {
    width: 60px;
    height: 60px;
    border-radius: 12px;
    background: #002f38;
    box-shadow:
      inset 0 0 12px #00fff7cc,
      0 4px 10px #003b45;
    font-size: 2.2rem;
    color: #00fff7;
    display: flex;
    justify-content: center;
    align-items: center;
    user-select: none;
    cursor: pointer;
    transition: background 0.25s, box-shadow 0.25s;
    position: relative;
  }
  .cell:hover {
    background: #00fff7;
    color: #003333;
    box-shadow:
      0 0 12px #00fff7cc,
      0 0 25px #00fff7dd;
  }
  .cell.clicked {
    cursor: default;
    pointer-events: none;
  }
  .cell.explode {
    animation: explodeAnim 0.6s ease forwards;
    color: #ff3d3d;
    background: #660000 !important;
    box-shadow:
      0 0 20px #ff1a1a,
      inset 0 0 40px #ff4d4d;
  }
  .cell.diamond-found {
    animation: sparkle 2s infinite alternate;
    color: #00fff7;
    text-shadow:
      0 0 5px #00fff7,
      0 0 15px #00fff7aa,
      0 0 30px #00fff7ff;
  }

  @keyframes explodeAnim {
    0% { transform: scale(1) rotate(0deg); opacity: 1; }
    50% { transform: scale(1.6) rotate(20deg); opacity: 0.9; }
    100% { transform: scale(2) rotate(-15deg); opacity: 0; }
  }

  @keyframes sparkle {
    0% {
      text-shadow:
        0 0 5px #00fff7,
        0 0 15px #00fff7aa,
        0 0 30px #00fff7ff;
    }
    100% {
      text-shadow:
        0 0 10px #00fff7,
        0 0 25px #00fff7cc,
        0 0 50px #00fff7ff;
    }
  }

  #score {
    margin-top: 5px;
    font-size: 1.2rem;
    font-weight: 700;
    text-shadow: 0 0 7px #00fff7aa;
  }

  #timer {
    margin-top: 8px;
    font-size: 1.1rem;
    font-weight: 700;
    color: #ffce00;
    text-shadow:
      0 0 5px #ffce00aa,
      0 0 10px #ffce0099;
  }

  #diamanteDisplay, #bombaDisplay {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(1);
    font-size: 14rem;
    pointer-events: none;
    opacity: 0;
    user-select: none;
    text-shadow:
      0 0 15px #00fff7cc,
      0 0 30px #00fff7ff,
      0 0 60px #00fff7ff;
    animation-fill-mode: forwards;
    z-index: 1000;
  }

  #diamanteDisplay.show, #bombaDisplay.show {
    animation: popInOut 5s forwards;
    opacity: 1;
  }

  #diamanteDisplay {
    color: #00fff7;
  }

  #bombaDisplay {
    color: #ff3d3d;
    text-shadow:
      0 0 15px #ff3d3dcc,
      0 0 35px #ff3d3dff,
      0 0 70px #ff3d3dff;
  }

  @keyframes popInOut {
    0% {
      opacity: 0;
      transform: translate(-50%, -50%) scale(0.1);
    }
    10% {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1.3);
    }
    90% {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1.3);
    }
    100% {
      opacity: 0;
      transform: translate(-50%, -50%) scale(0.1);
    }
  }

  #discordBtn {
    margin-top: 40px;
    padding: 12px 30px;
    background: #7289da;
    border-radius: 25px;
    color: white;
    font-weight: 700;
    font-size: 1.2rem;
    box-shadow:
      0 0 20px #7289daaa,
      0 4px 10px #7289dacc;
    border: none;
    cursor: pointer;
    transition: background 0.3s;
  }
  #discordBtn:hover {
    background: #5b6eae;
  }

</style>
</head>
<body>

<h1>Minigame ðŸ’Ž</h1>

<div id="loginScreen">
  <p>Digite seu e-mail para jogar:</p>
  <input type="email" id="emailInput" placeholder="seuemail@email.com" required />
  <button id="loginBtn">Entrar</button>
</div>

<div id="game">
  <div id="score">Acertos: 0 | Erros: 0</div>
  <div id="timer"></div>
  <div class="grid" id="grid"></div>
</div>

<div id="diamanteDisplay">ðŸ’Ž</div>
<div id="bombaDisplay">ðŸ’¥</div>

<button id="discordBtn" title="Nosso Discord">Nosso Discord</button>

<script>
  const grid = document.getElementById('grid');
  const scoreDisplay = document.getElementById('score');
  const diamanteDisplay = document.getElementById('diamanteDisplay');
  const bombaDisplay = document.getElementById('bombaDisplay');
  const timerDisplay = document.getElementById('timer');
  const emailInput = document.getElementById('emailInput');
  const loginScreen = document.getElementById('loginScreen');
  const game = document.getElementById('game');
  const loginBtn = document.getElementById('loginBtn');
  const discordBtn = document.getElementById('discordBtn');

  let email = '';
  let acertos = 0;
  let erros = 0;
  let bloqueadoAte = null;
  let timerInterval = null;
  let gameBlocked = false;

  function gerarGrid() {
    grid.innerHTML = '';
    gameBlocked = false;
    const posicoes = Array(24).fill('bomba');
    let colocados = 0;
    while (colocados < 8) {
      let i = Math.floor(Math.random() * 24);
      if (posicoes[i] === 'bomba') {
        posicoes[i] = 'diamante';
        colocados++;
      }
    }

    posicoes.forEach((valor, index) => {
      const cell = document.createElement('div');
      cell.className = 'cell';
      cell.innerText = '';
      cell.classList.remove('clicked', 'explode', 'diamond-found');
      cell.onclick = () => {
        if (cell.classList.contains('clicked') || gameBlocked) return;
        cell.classList.add('clicked');
        if (valor === 'diamante') {
          acertos++;
          cell.innerText = 'ðŸ’Ž';
          cell.classList.add('diamond-found');
          mostrarDiamanteAnimacao();
          atualizarPlacar();
          verificarFim();
        } else {
          erros++;
          cell.classList.add('explode');
          mostrarBombaAnimacao();
          atualizarPlacar();
          verificarFim();
          gameBlocked = true;
          setTimeout(() => {
            if (erros < 8) gerarGrid();
          }, 1200);
        }
      };
      grid.appendChild(cell);
    });
  }

  function mostrarDiamanteAnimacao() {
    diamanteDisplay.classList.add('show');
    setTimeout(() => {
      diamanteDisplay.classList.remove('show');
    }, 5000);
  }

  function mostrarBombaAnimacao() {
    bombaDisplay.classList.add('show');
    setTimeout(() => {
      bombaDisplay.classList.remove('show');
    }, 5000);
  }

  function atualizarPlacar() {
    scoreDisplay.innerText = `Acertos: ${acertos} | Erros: ${erros}`;
  }

  function verificarFim() {
    if (erros >= 8) {
      bloquearJogo();
    }
  }

  function bloquearJogo() {
    bloqueadoAte = Date.now() + 3600000; // 1 hora
    localStorage.setItem(`bloqueado_${email}`, bloqueadoAte);
    mostrarBloqueio();
  }

  function mostrarBloqueio() {
    gameBlocked = true;
    game.style.display = 'none';
    loginScreen.style.display = 'block';
    atualizarContagemRegressiva();
    if (timerInterval) clearInterval(timerInterval);
    timerInterval = setInterval(() => {
      if (!atualizarContagemRegressiva()) {
        clearInterval(timerInterval);
        iniciarJogo();
      }
    }, 1000);
  }

  function atualizarContagemRegressiva() {
    const agora = Date.now();
    const restante = bloqueadoAte - agora;
    if (restante <= 0) {
      timerDisplay.innerText = '';
      localStorage.removeItem(`bloqueado_${email}`);
      return false;
    }
    const minutos = Math.floor(restante / 60000);
    const segundos = Math.floor((restante % 60000) / 1000);
    timerDisplay.innerText = `VocÃª errou 8 vezes. Tente novamente em ${minutos}m ${segundos}s.`;
    return true;
  }

  function login() {
    let inputEmail = emailInput.value.trim().toLowerCase();
    if (!inputEmail || !validarEmail(inputEmail)) {
      alert('Digite um e-mail vÃ¡lido!');
      return;
    }
    email = inputEmail;
    const bloqueio = localStorage.getItem(`bloqueado_${email}`);
    if (bloqueio && Date.now() < bloqueio) {
      bloqueadoAte = Number(bloqueio);
      mostrarBloqueio();
      return;
    }
    iniciarJogo();
  }

  function validarEmail(email) {
    // Regex simples para validar email
    const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return re.test(email);
  }

  function iniciarJogo() {
    acertos = 0;
    erros = 0;
    atualizarPlacar();
    bloquearAcoes(false);
    gerarGrid();
    loginScreen.style.display = 'none';
    game.style.display = 'block';
    timerDisplay.innerText = '';
    bloqueadoAte = null;
    if(timerInterval) clearInterval(timerInterval);
  }

  function bloquearAcoes(bloquear) {
    gameBlocked = bloquear;
  }

  loginBtn.addEventListener('click', login);

  discordBtn.addEventListener('click', () => {
    window.open('https://discord.gg/6uWf2zuH6T', '_blank');
  });

  // Ao carregar, mostrar login
  window.onload = () => {
    loginScreen.style.display = 'block';
    game.style.display = 'none';
  };
</script>
</body>
</html>
